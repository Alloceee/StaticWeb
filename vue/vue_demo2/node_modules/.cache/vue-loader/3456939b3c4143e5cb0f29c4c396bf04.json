{"remainingRequest":"E:\\TellHow\\vue\\vue_demo2\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\TellHow\\vue\\vue_demo2\\src\\components\\admin\\news\\Add.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\TellHow\\vue\\vue_demo2\\src\\components\\admin\\news\\Add.vue","mtime":1577696631835},{"path":"E:\\TellHow\\vue\\vue_demo2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1575534104133},{"path":"E:\\TellHow\\vue\\vue_demo2\\node_modules\\babel-loader\\lib\\index.js","mtime":1575534135931},{"path":"E:\\TellHow\\vue\\vue_demo2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1575534104133},{"path":"E:\\TellHow\\vue\\vue_demo2\\node_modules\\vue-loader\\lib\\index.js","mtime":1575534129651}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport DateTimePicker from '@/components/home/utils/DateTimePicker.vue'\nexport default {\n\tname: 'NewsAdd',\n\tcomponents: {\n\t\tDateTimePicker\n\t},\n\tcreated() {\n\t\tthis.$axios\n\t\t\t.get('/admin/chinaFight/all')\n\t\t\t.then(resp => {\n\t\t\t\tvar chinaFights = this.filterOptions(resp.data.data)\n\t\t\t\tthis.options = [{\n\t\t\t\t\tlabel: '国内',\n\t\t\t\t\tchildren: chinaFights\n\t\t\t\t},\n\t\t\t});\n\t\tthis.$axios\n\t\t\t.get('/admin/abroadFight/all')\n\t\t\t.then(resp => {\n\t\t\t\tvar abroadFights = this.filterOptions(resp.data.data)\n\t\t\t\tthis.options.push({\n\t\t\t\t\tlabel: '国外',\n\t\t\t\t\tchildren: abroadFights\n\t\t\t\t});\n\t\t\t});\n\t},\n\tdata() {\n\t\treturn {\n\t\t\timageUrl: '',\n\t\t\tnews: {\n\t\t\t\ttitle: '',\n\t\t\t\tcontent: '',\n\t\t\t\tnotifyFight: '',\n\t\t\t\tnotifyContent: '',\n\t\t\t\tstatus: true,\n\t\t\t\tisNotify: false\n\t\t\t},\n\t\t\tfileForm: false,\n\t\t\tfileList: '',\n\t\t\trules: {\n\t\t\t\ttitle: [{\n\t\t\t\t\trequired: true,\n\t\t\t\t\tmessage: '请选择新闻标题',\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}]\n\t\t\t},\n\t\t\toptions: [{\n\t\t\t\tvalue: 'zhinan',\n\t\t\t\tlabel: '起飞时间12-25',\n\t\t\t\tchildren: [{\n\t\t\t\t\tvalue: 'shejiyuanze',\n\t\t\t\t\tlabel: '国内',\n\t\t\t\t\tchildren: [{\n\t\t\t\t\t\tvalue: 'yizhi',\n\t\t\t\t\t\tlabel: '起飞城市',\n\t\t\t\t\t\tchildren: [{\n\t\t\t\t\t\t\t\tvalue: 'id',\n\t\t\t\t\t\t\t\tlabel: '目的地',\n\t\t\t\t\t\t\t\tchildren: [{\n\t\t\t\t\t\t\t\t\tvalue: 'id',\n\t\t\t\t\t\t\t\t\tlabel: '航班序号',\n\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvalue: 'id',\n\t\t\t\t\t\t\t\tlabel: '目的地',\n\t\t\t\t\t\t\t\tchildren: [{\n\t\t\t\t\t\t\t\t\tvalue: 'id',\n\t\t\t\t\t\t\t\t\tlabel: '航班序号',\n\t\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'fankui',\n\t\t\t\t\t\tlabel: '反馈'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'xiaolv',\n\t\t\t\t\t\tlabel: '效率'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'kekong',\n\t\t\t\t\t\tlabel: '可控'\n\t\t\t\t\t}]\n\t\t\t\t}, {\n\t\t\t\t\tvalue: 'daohang',\n\t\t\t\t\tlabel: '国外',\n\t\t\t\t\tchildren: [{\n\t\t\t\t\t\tvalue: 'cexiangdaohang',\n\t\t\t\t\t\tlabel: '侧向导航'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'dingbudaohang',\n\t\t\t\t\t\tlabel: '顶部导航'\n\t\t\t\t\t}]\n\t\t\t\t}]\n\t\t\t}, {\n\t\t\t\tvalue: 'zujian',\n\t\t\t\tlabel: '组件',\n\t\t\t\tchildren: [{\n\t\t\t\t\tvalue: 'basic',\n\t\t\t\t\tlabel: 'Basic',\n\t\t\t\t\tchildren: [{\n\t\t\t\t\t\tvalue: 'layout',\n\t\t\t\t\t\tlabel: 'Layout 布局'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'color',\n\t\t\t\t\t\tlabel: 'Color 色彩'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'typography',\n\t\t\t\t\t\tlabel: 'Typography 字体'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'icon',\n\t\t\t\t\t\tlabel: 'Icon 图标'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'button',\n\t\t\t\t\t\tlabel: 'Button 按钮'\n\t\t\t\t\t}]\n\t\t\t\t}, {\n\t\t\t\t\tvalue: 'form',\n\t\t\t\t\tlabel: 'Form',\n\t\t\t\t\tchildren: [{\n\t\t\t\t\t\tvalue: 'radio',\n\t\t\t\t\t\tlabel: 'Radio 单选框'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'checkbox',\n\t\t\t\t\t\tlabel: 'Checkbox 多选框'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'input',\n\t\t\t\t\t\tlabel: 'Input 输入框'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'input-number',\n\t\t\t\t\t\tlabel: 'InputNumber 计数器'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'select',\n\t\t\t\t\t\tlabel: 'Select 选择器'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'cascader',\n\t\t\t\t\t\tlabel: 'Cascader 级联选择器'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'switch',\n\t\t\t\t\t\tlabel: 'Switch 开关'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'slider',\n\t\t\t\t\t\tlabel: 'Slider 滑块'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'time-picker',\n\t\t\t\t\t\tlabel: 'TimePicker 时间选择器'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'date-picker',\n\t\t\t\t\t\tlabel: 'DatePicker 日期选择器'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'datetime-picker',\n\t\t\t\t\t\tlabel: 'DateTimePicker 日期时间选择器'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'upload',\n\t\t\t\t\t\tlabel: 'Upload 上传'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'rate',\n\t\t\t\t\t\tlabel: 'Rate 评分'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'form',\n\t\t\t\t\t\tlabel: 'Form 表单'\n\t\t\t\t\t}]\n\t\t\t\t}, {\n\t\t\t\t\tvalue: 'data',\n\t\t\t\t\tlabel: 'Data',\n\t\t\t\t\tchildren: [{\n\t\t\t\t\t\tvalue: 'table',\n\t\t\t\t\t\tlabel: 'Table 表格'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'tag',\n\t\t\t\t\t\tlabel: 'Tag 标签'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'progress',\n\t\t\t\t\t\tlabel: 'Progress 进度条'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'tree',\n\t\t\t\t\t\tlabel: 'Tree 树形控件'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'pagination',\n\t\t\t\t\t\tlabel: 'Pagination 分页'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'badge',\n\t\t\t\t\t\tlabel: 'Badge 标记'\n\t\t\t\t\t}]\n\t\t\t\t}, {\n\t\t\t\t\tvalue: 'notice',\n\t\t\t\t\tlabel: 'Notice',\n\t\t\t\t\tchildren: [{\n\t\t\t\t\t\tvalue: 'alert',\n\t\t\t\t\t\tlabel: 'Alert 警告'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'loading',\n\t\t\t\t\t\tlabel: 'Loading 加载'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'message',\n\t\t\t\t\t\tlabel: 'Message 消息提示'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'message-box',\n\t\t\t\t\t\tlabel: 'MessageBox 弹框'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'notification',\n\t\t\t\t\t\tlabel: 'Notification 通知'\n\t\t\t\t\t}]\n\t\t\t\t}, {\n\t\t\t\t\tvalue: 'navigation',\n\t\t\t\t\tlabel: 'Navigation',\n\t\t\t\t\tchildren: [{\n\t\t\t\t\t\tvalue: 'menu',\n\t\t\t\t\t\tlabel: 'NavMenu 导航菜单'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'tabs',\n\t\t\t\t\t\tlabel: 'Tabs 标签页'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'breadcrumb',\n\t\t\t\t\t\tlabel: 'Breadcrumb 面包屑'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'dropdown',\n\t\t\t\t\t\tlabel: 'Dropdown 下拉菜单'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'steps',\n\t\t\t\t\t\tlabel: 'Steps 步骤条'\n\t\t\t\t\t}]\n\t\t\t\t}, {\n\t\t\t\t\tvalue: 'others',\n\t\t\t\t\tlabel: 'Others',\n\t\t\t\t\tchildren: [{\n\t\t\t\t\t\tvalue: 'dialog',\n\t\t\t\t\t\tlabel: 'Dialog 对话框'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'tooltip',\n\t\t\t\t\t\tlabel: 'Tooltip 文字提示'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'popover',\n\t\t\t\t\t\tlabel: 'Popover 弹出框'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'card',\n\t\t\t\t\t\tlabel: 'Card 卡片'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'carousel',\n\t\t\t\t\t\tlabel: 'Carousel 走马灯'\n\t\t\t\t\t}, {\n\t\t\t\t\t\tvalue: 'collapse',\n\t\t\t\t\t\tlabel: 'Collapse 折叠面板'\n\t\t\t\t\t}]\n\t\t\t\t}]\n\t\t\t}]\n\t\t};\n\t},\n\tmethods: {\n\t\tsubmitForm(formName) {\n\t\t\tthis.$refs[formName].validate((valid) => {\n\t\t\t\tif (valid) {\n\t\t\t\t\tthis.$axios\n\t\t\t\t\t\t.post('/admin/news/add', {\n\t\t\t\t\t\t\ttitle: this.news.title,\n\t\t\t\t\t\t\tplanStartTime: this.$refs.time.time[0],\n\t\t\t\t\t\t\tplanEndTime: this.$refs.time.time[1],\n\t\t\t\t\t\t\tnotifyFight: this.news.notifyFight,\n\t\t\t\t\t\t\tnotifyContent: this.news.notifyContent,\n\t\t\t\t\t\t\tstatus: this.news.status ? 0 : 1\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(resp => {\n\t\t\t\t\t\t\tif (resp.data.code === 200) {\n\t\t\t\t\t\t\t\tvar data = resp.data.msg;\n\t\t\t\t\t\t\t\tthis.$message({\n\t\t\t\t\t\t\t\t\tmessage: data,\n\t\t\t\t\t\t\t\t\ttype: 'success'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tvar path = this.$route.query.redirect\n\t\t\t\t\t\t\t\tthis.$router.replace({\n\t\t\t\t\t\t\t\t\tpath: path === '/admin/news/add' || path === undefined ? '/admin/news/show' : path\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(failResponse => {})\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tresetForm(formName) {\n\t\t\tthis.$refs[formName].resetFields();\n\t\t},\n\t\tgoBack() {\n\t\t\tconsole.log('go back');\n\t\t},\n\t\tfileUpload() {\n\t\t\tthis.fileForm = true;\n\t\t},\n\t\thandleChange(file, fileList) {\n\t\t\tconst isExcel = file.type === ('xls') || ('xlsx');\n\t\t\tthis.fileList = fileList.slice(-3);\n\t\t},\n\t\tfilterOptions(beforeData) {\n\t\t\tvar tempArr = [];\n\t\t\tthis.afterData = [];\n\t\t\tfor (let i = 0; i < beforeData.length; i++) {\n\t\t\t\tif (tempArr.indexOf(beforeData[i].startCity) === -1) {\n\t\t\t\t\tthis.afterData.push({\n\t\t\t\t\t\tlabel: beforeData[i].startCity,\n\t\t\t\t\t\tchildren: [beforeData[i]]\n\t\t\t\t\t});\n\t\t\t\t\ttempArr.push(beforeData[i].startCity);\n\t\t\t\t} else {\n\t\t\t\t\tfor (let j = 0; j < this.afterData.length; j++) {\n\t\t\t\t\t\tif (this.afterData[j].label == beforeData[i].startCity) {\n\t\t\t\t\t\t\tthis.afterData[j].children.push(beforeData[i]);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (let i = 0; i < this.afterData.length; i++) {\n\t\t\t\tvar tempArr2 = [];\n\t\t\t\tthis.afterDataChilds = [];\n\t\t\t\tthis.afterDataChild = this.afterData[i].children;\n\t\t\t\tfor (let m = 0; m < this.afterDataChild.length; m++) {\n\t\t\t\t\tif (tempArr2.indexOf(this.afterDataChild[m].endCity) === -1) {\n\t\t\t\t\t\tthis.afterDataChilds.push({\n\t\t\t\t\t\t\tlabel: this.afterDataChild[m].endCity,\n\t\t\t\t\t\t\tchildren: [{\n\t\t\t\t\t\t\t\tlabel: this.afterDataChild[m].number,\n\t\t\t\t\t\t\t\tvalue: this.afterDataChild[m].id\n\t\t\t\t\t\t\t}]\n\t\t\t\t\t\t});\n\t\t\t\t\t\ttempArr2.push(this.afterDataChild[m].endCity);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor (let j = 0; j < this.afterDataChilds.length; j++) {\n\t\t\t\t\t\t\tif (this.afterDataChilds[j].label == this.afterDataChild[m].endCity) {\n\t\t\t\t\t\t\t\tthis.afterDataChilds[j].children.push({\n\t\t\t\t\t\t\t\t\tlabel: this.afterDataChild[m].number,\n\t\t\t\t\t\t\t\t\tvalue: this.afterDataChild[m].id\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.afterData[i].children = this.afterDataChilds;\n\t\t\t}\n\t\t\treturn this.afterData;\n\t\t}\n\t}\n}\n",{"version":3,"sources":["Add.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Add.vue","sourceRoot":"src/components/admin/news","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<el-page-header @back=\"goBack\" content=\"添加新闻动态\"></el-page-header>\r\n\t\t<el-row :gutter=\"20\">\r\n\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t<el-form :model=\"news\" :rules=\"rules\" ref=\"news\" label-width=\"100px\" class=\"demo-ruleForm\">\r\n\t\t\t\t\t<el-form-item label=\"新闻标题\" prop=\"title\">\r\n\t\t\t\t\t\t<el-input v-model=\"news.title\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"航班计划时间\" prop=\"content\">\r\n\t\t\t\t\t\t<DateTimePicker ref=\"time\"></DateTimePicker>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"所属航班\" prop=\"notifyFight\">\r\n\t\t\t\t\t\t<el-cascader placeholder=\"选择航班\" v-model=\"news.notifyFight\" :options=\"options\" :props=\"{ multiple: true }\"\r\n\t\t\t\t\t\t filterable></el-cascader>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"是否通知\" prop=\"isNotify\">\r\n\t\t\t\t\t\t<el-switch v-model=\"news.isNotify\" active-text=\"通知\" inactive-text=\"不通知\">\r\n\t\t\t\t\t\t</el-switch>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"通知内容\" prop=\"notifyContent\">\r\n\t\t\t\t\t\t<el-input type=\"textarea\" :rows=\"7\" v-model=\"news.notifyContent\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item label=\"航班状态\" prop=\"status\">\r\n\t\t\t\t\t\t<el-switch v-model=\"news.status\" active-color=\"#13ce66\" inactive-color=\"#ff4949\" active-text=\"计划\" inactive-text=\"延误\">\r\n\t\t\t\t\t\t</el-switch>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item>\r\n\t\t\t\t\t\t<el-button @click=\"fileUpload\">\r\n\t\t\t\t\t\t\t<i class=\"el-icon-folder-add\"></i>\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"submitForm('news')\">添 加</el-button>\r\n\t\t\t\t\t\t<el-button @click=\"resetForm('news')\">重 置</el-button>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-form>\r\n\t\t\t</el-col>\r\n\t\t</el-row>\r\n\t\t<el-dialog title=\"批量文件上传\" :visible.sync=\"fileForm\">\r\n\t\t\t<el-upload class=\"upload-demo\" action=\"https://jsonplaceholder.typicode.com/posts/\" :on-change=\"handleChange\">\r\n\t\t\t\t<el-button type=\"primary\">点击上传</el-button>\r\n\t\t\t\t<div slot=\"tip\" class=\"el-upload__tip\">只能上传jpg/png文件，且不超过500kb</div>\r\n\t\t\t</el-upload>\r\n\t\t\t<div slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button @click=\"fileForm = false\">取 消</el-button>\r\n\t\t\t</div>\r\n\t\t</el-dialog>\r\n\t</div>\r\n\r\n</template>\r\n\r\n<script>\r\n\timport DateTimePicker from '@/components/home/utils/DateTimePicker.vue'\r\n\texport default {\r\n\t\tname: 'NewsAdd',\r\n\t\tcomponents: {\r\n\t\t\tDateTimePicker\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.$axios\r\n\t\t\t\t.get('/admin/chinaFight/all')\r\n\t\t\t\t.then(resp => {\r\n\t\t\t\t\tvar chinaFights = this.filterOptions(resp.data.data)\r\n\t\t\t\t\tthis.options = [{\r\n\t\t\t\t\t\tlabel: '国内',\r\n\t\t\t\t\t\tchildren: chinaFights\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\tthis.$axios\r\n\t\t\t\t.get('/admin/abroadFight/all')\r\n\t\t\t\t.then(resp => {\r\n\t\t\t\t\tvar abroadFights = this.filterOptions(resp.data.data)\r\n\t\t\t\t\tthis.options.push({\r\n\t\t\t\t\t\tlabel: '国外',\r\n\t\t\t\t\t\tchildren: abroadFights\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\timageUrl: '',\r\n\t\t\t\tnews: {\r\n\t\t\t\t\ttitle: '',\r\n\t\t\t\t\tcontent: '',\r\n\t\t\t\t\tnotifyFight: '',\r\n\t\t\t\t\tnotifyContent: '',\r\n\t\t\t\t\tstatus: true,\r\n\t\t\t\t\tisNotify: false\r\n\t\t\t\t},\r\n\t\t\t\tfileForm: false,\r\n\t\t\t\tfileList: '',\r\n\t\t\t\trules: {\r\n\t\t\t\t\ttitle: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\tmessage: '请选择新闻标题',\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\toptions: [{\r\n\t\t\t\t\tvalue: 'zhinan',\r\n\t\t\t\t\tlabel: '起飞时间12-25',\r\n\t\t\t\t\tchildren: [{\r\n\t\t\t\t\t\tvalue: 'shejiyuanze',\r\n\t\t\t\t\t\tlabel: '国内',\r\n\t\t\t\t\t\tchildren: [{\r\n\t\t\t\t\t\t\tvalue: 'yizhi',\r\n\t\t\t\t\t\t\tlabel: '起飞城市',\r\n\t\t\t\t\t\t\tchildren: [{\r\n\t\t\t\t\t\t\t\t\tvalue: 'id',\r\n\t\t\t\t\t\t\t\t\tlabel: '目的地',\r\n\t\t\t\t\t\t\t\t\tchildren: [{\r\n\t\t\t\t\t\t\t\t\t\tvalue: 'id',\r\n\t\t\t\t\t\t\t\t\t\tlabel: '航班序号',\r\n\t\t\t\t\t\t\t\t\t}]\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tvalue: 'id',\r\n\t\t\t\t\t\t\t\t\tlabel: '目的地',\r\n\t\t\t\t\t\t\t\t\tchildren: [{\r\n\t\t\t\t\t\t\t\t\t\tvalue: 'id',\r\n\t\t\t\t\t\t\t\t\t\tlabel: '航班序号',\r\n\t\t\t\t\t\t\t\t\t}]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'fankui',\r\n\t\t\t\t\t\t\tlabel: '反馈'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'xiaolv',\r\n\t\t\t\t\t\t\tlabel: '效率'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'kekong',\r\n\t\t\t\t\t\t\tlabel: '可控'\r\n\t\t\t\t\t\t}]\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tvalue: 'daohang',\r\n\t\t\t\t\t\tlabel: '国外',\r\n\t\t\t\t\t\tchildren: [{\r\n\t\t\t\t\t\t\tvalue: 'cexiangdaohang',\r\n\t\t\t\t\t\t\tlabel: '侧向导航'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'dingbudaohang',\r\n\t\t\t\t\t\t\tlabel: '顶部导航'\r\n\t\t\t\t\t\t}]\r\n\t\t\t\t\t}]\r\n\t\t\t\t}, {\r\n\t\t\t\t\tvalue: 'zujian',\r\n\t\t\t\t\tlabel: '组件',\r\n\t\t\t\t\tchildren: [{\r\n\t\t\t\t\t\tvalue: 'basic',\r\n\t\t\t\t\t\tlabel: 'Basic',\r\n\t\t\t\t\t\tchildren: [{\r\n\t\t\t\t\t\t\tvalue: 'layout',\r\n\t\t\t\t\t\t\tlabel: 'Layout 布局'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'color',\r\n\t\t\t\t\t\t\tlabel: 'Color 色彩'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'typography',\r\n\t\t\t\t\t\t\tlabel: 'Typography 字体'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'icon',\r\n\t\t\t\t\t\t\tlabel: 'Icon 图标'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'button',\r\n\t\t\t\t\t\t\tlabel: 'Button 按钮'\r\n\t\t\t\t\t\t}]\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tvalue: 'form',\r\n\t\t\t\t\t\tlabel: 'Form',\r\n\t\t\t\t\t\tchildren: [{\r\n\t\t\t\t\t\t\tvalue: 'radio',\r\n\t\t\t\t\t\t\tlabel: 'Radio 单选框'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'checkbox',\r\n\t\t\t\t\t\t\tlabel: 'Checkbox 多选框'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'input',\r\n\t\t\t\t\t\t\tlabel: 'Input 输入框'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'input-number',\r\n\t\t\t\t\t\t\tlabel: 'InputNumber 计数器'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'select',\r\n\t\t\t\t\t\t\tlabel: 'Select 选择器'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'cascader',\r\n\t\t\t\t\t\t\tlabel: 'Cascader 级联选择器'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'switch',\r\n\t\t\t\t\t\t\tlabel: 'Switch 开关'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'slider',\r\n\t\t\t\t\t\t\tlabel: 'Slider 滑块'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'time-picker',\r\n\t\t\t\t\t\t\tlabel: 'TimePicker 时间选择器'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'date-picker',\r\n\t\t\t\t\t\t\tlabel: 'DatePicker 日期选择器'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'datetime-picker',\r\n\t\t\t\t\t\t\tlabel: 'DateTimePicker 日期时间选择器'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'upload',\r\n\t\t\t\t\t\t\tlabel: 'Upload 上传'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'rate',\r\n\t\t\t\t\t\t\tlabel: 'Rate 评分'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'form',\r\n\t\t\t\t\t\t\tlabel: 'Form 表单'\r\n\t\t\t\t\t\t}]\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tvalue: 'data',\r\n\t\t\t\t\t\tlabel: 'Data',\r\n\t\t\t\t\t\tchildren: [{\r\n\t\t\t\t\t\t\tvalue: 'table',\r\n\t\t\t\t\t\t\tlabel: 'Table 表格'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'tag',\r\n\t\t\t\t\t\t\tlabel: 'Tag 标签'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'progress',\r\n\t\t\t\t\t\t\tlabel: 'Progress 进度条'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'tree',\r\n\t\t\t\t\t\t\tlabel: 'Tree 树形控件'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'pagination',\r\n\t\t\t\t\t\t\tlabel: 'Pagination 分页'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'badge',\r\n\t\t\t\t\t\t\tlabel: 'Badge 标记'\r\n\t\t\t\t\t\t}]\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tvalue: 'notice',\r\n\t\t\t\t\t\tlabel: 'Notice',\r\n\t\t\t\t\t\tchildren: [{\r\n\t\t\t\t\t\t\tvalue: 'alert',\r\n\t\t\t\t\t\t\tlabel: 'Alert 警告'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'loading',\r\n\t\t\t\t\t\t\tlabel: 'Loading 加载'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'message',\r\n\t\t\t\t\t\t\tlabel: 'Message 消息提示'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'message-box',\r\n\t\t\t\t\t\t\tlabel: 'MessageBox 弹框'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'notification',\r\n\t\t\t\t\t\t\tlabel: 'Notification 通知'\r\n\t\t\t\t\t\t}]\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tvalue: 'navigation',\r\n\t\t\t\t\t\tlabel: 'Navigation',\r\n\t\t\t\t\t\tchildren: [{\r\n\t\t\t\t\t\t\tvalue: 'menu',\r\n\t\t\t\t\t\t\tlabel: 'NavMenu 导航菜单'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'tabs',\r\n\t\t\t\t\t\t\tlabel: 'Tabs 标签页'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'breadcrumb',\r\n\t\t\t\t\t\t\tlabel: 'Breadcrumb 面包屑'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'dropdown',\r\n\t\t\t\t\t\t\tlabel: 'Dropdown 下拉菜单'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'steps',\r\n\t\t\t\t\t\t\tlabel: 'Steps 步骤条'\r\n\t\t\t\t\t\t}]\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\tvalue: 'others',\r\n\t\t\t\t\t\tlabel: 'Others',\r\n\t\t\t\t\t\tchildren: [{\r\n\t\t\t\t\t\t\tvalue: 'dialog',\r\n\t\t\t\t\t\t\tlabel: 'Dialog 对话框'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'tooltip',\r\n\t\t\t\t\t\t\tlabel: 'Tooltip 文字提示'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'popover',\r\n\t\t\t\t\t\t\tlabel: 'Popover 弹出框'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'card',\r\n\t\t\t\t\t\t\tlabel: 'Card 卡片'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'carousel',\r\n\t\t\t\t\t\t\tlabel: 'Carousel 走马灯'\r\n\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\tvalue: 'collapse',\r\n\t\t\t\t\t\t\tlabel: 'Collapse 折叠面板'\r\n\t\t\t\t\t\t}]\r\n\t\t\t\t\t}]\r\n\t\t\t\t}]\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tsubmitForm(formName) {\r\n\t\t\t\tthis.$refs[formName].validate((valid) => {\r\n\t\t\t\t\tif (valid) {\r\n\t\t\t\t\t\tthis.$axios\r\n\t\t\t\t\t\t\t.post('/admin/news/add', {\r\n\t\t\t\t\t\t\t\ttitle: this.news.title,\r\n\t\t\t\t\t\t\t\tplanStartTime: this.$refs.time.time[0],\r\n\t\t\t\t\t\t\t\tplanEndTime: this.$refs.time.time[1],\r\n\t\t\t\t\t\t\t\tnotifyFight: this.news.notifyFight,\r\n\t\t\t\t\t\t\t\tnotifyContent: this.news.notifyContent,\r\n\t\t\t\t\t\t\t\tstatus: this.news.status ? 0 : 1\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.then(resp => {\r\n\t\t\t\t\t\t\t\tif (resp.data.code === 200) {\r\n\t\t\t\t\t\t\t\t\tvar data = resp.data.msg;\r\n\t\t\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\t\t\tmessage: data,\r\n\t\t\t\t\t\t\t\t\t\ttype: 'success'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tvar path = this.$route.query.redirect\r\n\t\t\t\t\t\t\t\t\tthis.$router.replace({\r\n\t\t\t\t\t\t\t\t\t\tpath: path === '/admin/news/add' || path === undefined ? '/admin/news/show' : path\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch(failResponse => {})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tresetForm(formName) {\r\n\t\t\t\tthis.$refs[formName].resetFields();\r\n\t\t\t},\r\n\t\t\tgoBack() {\r\n\t\t\t\tconsole.log('go back');\r\n\t\t\t},\r\n\t\t\tfileUpload() {\r\n\t\t\t\tthis.fileForm = true;\r\n\t\t\t},\r\n\t\t\thandleChange(file, fileList) {\r\n\t\t\t\tconst isExcel = file.type === ('xls') || ('xlsx');\r\n\t\t\t\tthis.fileList = fileList.slice(-3);\r\n\t\t\t},\r\n\t\t\tfilterOptions(beforeData) {\r\n\t\t\t\tvar tempArr = [];\r\n\t\t\t\tthis.afterData = [];\r\n\t\t\t\tfor (let i = 0; i < beforeData.length; i++) {\r\n\t\t\t\t\tif (tempArr.indexOf(beforeData[i].startCity) === -1) {\r\n\t\t\t\t\t\tthis.afterData.push({\r\n\t\t\t\t\t\t\tlabel: beforeData[i].startCity,\r\n\t\t\t\t\t\t\tchildren: [beforeData[i]]\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\ttempArr.push(beforeData[i].startCity);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfor (let j = 0; j < this.afterData.length; j++) {\r\n\t\t\t\t\t\t\tif (this.afterData[j].label == beforeData[i].startCity) {\r\n\t\t\t\t\t\t\t\tthis.afterData[j].children.push(beforeData[i]);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor (let i = 0; i < this.afterData.length; i++) {\r\n\t\t\t\t\tvar tempArr2 = [];\r\n\t\t\t\t\tthis.afterDataChilds = [];\r\n\t\t\t\t\tthis.afterDataChild = this.afterData[i].children;\r\n\t\t\t\t\tfor (let m = 0; m < this.afterDataChild.length; m++) {\r\n\t\t\t\t\t\tif (tempArr2.indexOf(this.afterDataChild[m].endCity) === -1) {\r\n\t\t\t\t\t\t\tthis.afterDataChilds.push({\r\n\t\t\t\t\t\t\t\tlabel: this.afterDataChild[m].endCity,\r\n\t\t\t\t\t\t\t\tchildren: [{\r\n\t\t\t\t\t\t\t\t\tlabel: this.afterDataChild[m].number,\r\n\t\t\t\t\t\t\t\t\tvalue: this.afterDataChild[m].id\r\n\t\t\t\t\t\t\t\t}]\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\ttempArr2.push(this.afterDataChild[m].endCity);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tfor (let j = 0; j < this.afterDataChilds.length; j++) {\r\n\t\t\t\t\t\t\t\tif (this.afterDataChilds[j].label == this.afterDataChild[m].endCity) {\r\n\t\t\t\t\t\t\t\t\tthis.afterDataChilds[j].children.push({\r\n\t\t\t\t\t\t\t\t\t\tlabel: this.afterDataChild[m].number,\r\n\t\t\t\t\t\t\t\t\t\tvalue: this.afterDataChild[m].id\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.afterData[i].children = this.afterDataChilds;\r\n\t\t\t\t}\r\n\t\t\t\treturn this.afterData;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped=\"scoped\">\r\n\t.el-form {\r\n\t\tmargin-top: 30px;\r\n\t}\r\n\r\n\t.el-upload__input {\r\n\t\tdisplay: none !important;\r\n\t}\r\n\r\n\t.el-upload input[type=\"file\"] {\r\n\t\tdisplay: none !important;\r\n\t}\r\n</style>\n"]}]}